version: '3.9'

services:

  ghost:
    env_file:
      - ./ghost_service_envars.env
    image: ghost:${GHOST_VERSION:-4-alpine}
    restart: ${GHOST_RESTART_POLICY:-always}
    ports:
      - ${GHOST_HOST_PORT:-8080}:${GHOST_CONTAINER_PORT:-2368}
    volumes:
      - type: bind
        source: ./data/ghost/content
        target: /var/lib/ghost/content
      - type: bind
        source: ./config/ghost/letsencrypt
        target: /etc/letsencrypt
        

  db:
    env_file:
      - ./mysql_service_envars.env
    image: mysql:${MYSQL_VERSION:-5.7}
    restart: ${MYSQL_RESTART_POLICY:-always}
    volumes:
      - type: bind
        source: ./config/mysql/conf.d
        target: /etc/mysql/conf.d